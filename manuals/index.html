<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Help/Manuals</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="/css/uikit.min.css" />
  <script src="/js/uikit.min.js"></script>
  <script src="/js/uikit-icons.min.js"></script>
</head>

<body>
  <div class="uk-container uk-container-center">
    <div uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
      <nav class="uk-navbar-container uk-dark" uk-navbar>
          <ul class="uk-navbar-nav">
            <li><a href="/" class="uk-icon-link" uk-icon="icon: home"></a></li>
            
              <li><a href="http://abills.net.ua/">ABillS</a></li>
            
              <li><a href="https://github.com/diger/Nms">Github</a></li>
            
              <li><a href="/manuals">Help</a></li>
            
              <li><a href="/screenshots.html">Screenshots</a></li>
            
          </ul>
      </nav>
    </div>
    <div uk-grid>
        
  <div class="uk-width-3-4">
    <h3>Установка</h3>

<p>Переходим в папку с модулями установленного биллинга и тащим гитом ветку с Nms:</p>

<pre>
  cd /usr/abills/Abills/modules/
  git clone https://github.com/diger/Nms.git
</pre>

<p>Создаем симлинки в папку libexec:</p>

<pre>
cd /usr/abills/libexec/
ln -s ../Abills/modules/Nms/nms_poll.pm billd.plugins/
</pre>

<p>Если будем ловить snmp трапы:</p>

<pre>
ln -s ../Abills/modules/Nms/gettrap .
</pre>

<h3>Активируем модуль</h3>

<p>Открываем файл <em>/usr/abills/libexec/config.pl</em>, находим массив @MODULES. <br />
Добавляем название модуля(Nms) в список. <br />
Теперь нужно разрешить доступ к модулю <a href="http://abills.net.ua/wiki/doku.php/abills:docs:manual:admin:form_admins">определенным пользователям</a></p>

<h3>Выставляем переменные</h3>

<p>Добавляем в файл <em>/usr/abills/libexec/config.pl</em> нужные переменные:  </p>

<div class="uk-table uk-table-justify">
<table>
<col />
<col />
<thead>
<tr>
	<th>Переменная</th>
	<th>Описание / Пример</th>
</tr>
</thead>
<tbody>
<tr>
	<td>$conf{NMS_NET}</td>
	<td><strong>Сеть для мониторинга/управления</strong>  $conf{NMS_NET}='10.0.0.0/24';</td>
</tr>
<tr>
	<td>$conf{NMS_COMMUNITY_RO}</td>
	<td><strong>Используемый по-умолчанию community</strong>  $conf{NMS_COMMUNITY_RO}='public';</td>
</tr>
<tr>
	<td>$conf{NMS_COMMUNITY_RW}</td>
	<td><strong>Используемый по-умолчанию community(RW)</strong>  $conf{NMS_COMMUNITY_RW}='private';</td>
</tr>
<tr>
	<td>$conf{GETTRAP_IP}</td>
	<td><strong>IP адрес, на котором ловим трапы</strong>  $conf{GETTRAP_IP}='10.0.0.1';</td>
</tr>
<tr>
	<td>$conf{TRAPS_CLEAN_PERIOD}</td>
	<td><strong>Период для очистки истории трапов</strong>  $conf{TRAPS_CLEAN_PERIOD}='10'</td>
</tr>
<tr>
	<td>$conf{GETTRAP_ALERT_ADDR}</td>
	<td><strong>Список оповещения</strong>  $conf{GETTRAP_ALERT_ADDR}='adm@name.org';</td>
</tr>
<tr>
	<td>$conf{REDIS_SERV}</td>
	<td><strong>Адрес сервера с</strong> <a href="https://redis.io/">Redis</a>  $conf{REDIS_SERV}='10.0.0.2:6379';</td>
</tr>
</tbody>
</table>
</div>

  </div>
  <div class="uk-width-1-4">
    <div uk-sticky="offset: 80;bottom: true">
      <div class="uk-card uk-card-hover">
        <ul class="uk-margin-left uk-nav uk-nav-default">
          
            <li><a href="lldp.html">LLDP</a></li>
          
            <li><a href="mib_browser.html">MIB Browser</a></li>
          
            <li><a href="snmp.html">SNMP tune</a></li>
          
            <li><a href="init.html">Инициализация БД</a></li>
          
            <li><a href="mibs.html">Подключаем MIB</a></li>
          
            <li><a href="index.html">Установка</a></li>
          
        </ul>
      </div>
    </div>
  </div>



    </div>
  </div>
</body>
</html>

