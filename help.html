<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <div class="navbar">
      <a href="/">*</a>
      
        <a href="http://abills.net.ua/">ABillS</a>
      
        <a href="/">About</a>
      
        <a href="https://github.com/diger/Nms">Github</a>
      
        <a href="/help.html">Help</a>
      
        <a href="/screenshots.html">Screenshots</a>
      
    </div>
    <div class="main">
         <div class="sidenav">
    
      <a href="/portfolio/">Активируем модуль</a>
    
      <a href="/about/">Выставляем переменные</a>
    
      <a href="[Install][]">Установка</a>
    
</div>

<h3 id="install">Установка [install]</h3>

<p>Переходим в папку с модулями установленного биллинга и тащим гитом ветку с Nms:</p>

<pre>
cd /usr/abills/Abills/modules/
git clone https://github.com/diger/Nms.git
</pre>

<p>Создаем симлинки в папку libexec:</p>

<pre>
cd /usr/abills/libexec/
ln -s ../Abills/modules/Nms/nms_poll.pm billd.plugins/
</pre>

<p>Если будем ловить snmp трапы:</p>

<pre>
ln -s ../Abills/modules/Nms/gettrap .
</pre>

<h3>Активируем модуль</h3>

<p>Открываем файл <em>/usr/abills/libexec/config.pl</em>, находим массив @MODULES. <br />
Добавляем название модуля(Nms) в список.</p>

<h3>Выставляем переменные</h3>

<p>Добавляем в файл <em>/usr/abills/libexec/config.pl</em> нужные переменные:  </p>

<table>
<col />
<col />
<col />
<thead>
</thead>
<tbody>
<tr>
	<td><strong>Переменная</strong></td>
	<td><strong>Описание</strong></td>
	<td><strong>Пример</strong></td>
</tr>
<tr>
	<td>$conf{NMS_NET}</td>
	<td>Сеть для мониторинга/управления</td>
	<td><code>$conf{NMS_NET}='10.0.0.0/24';</code></td>
</tr>
<tr>
	<td>$conf{NMS_COMMUNITY_RO}</td>
	<td>Используемый по-умолчанию community</td>
	<td><code>$conf{NMS_COMMUNITY_RO}='public';</code></td>
</tr>
<tr>
	<td>$conf{NMS_COMMUNITY_RW}</td>
	<td>Используемый по-умолчанию community(RW)</td>
	<td><code>$conf{NMS_COMMUNITY_RW}='private';</code></td>
</tr>
<tr>
	<td>$conf{GETTRAP_IP}</td>
	<td>IP адрес, на котором ловим трапы</td>
	<td><code>$conf{GETTRAP_IP}='10.0.0.1';</code></td>
</tr>
<tr>
	<td>$conf{TRAPS_CLEAN_PERIOD}</td>
	<td>Период для очистки истории трапов</td>
	<td><code>$conf{TRAPS_CLEAN_PERIOD}='10'</code></td>
</tr>
<tr>
	<td>$conf{GETTRAP_ALERT_ADDR}</td>
	<td>Список оповещения</td>
	<td><code>$conf{GETTRAP_ALERT_ADDR}='adm@name.org';</code></td>
</tr>
<tr>
	<td>$conf{REDIS_SERV}</td>
	<td>Адрес сервера с <a href="https://redis.io/">Redis</a></td>
	<td><code>$conf{REDIS_SERV}='10.0.0.2:6379';</code></td>
</tr>
</tbody>
</table>

    </div>
</body>
</html>

